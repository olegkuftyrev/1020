// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Product model for storing parsed PDF data
model Product {
  id            String   @id @default(uuid())
  productNumber String   @unique // e.g., P10002
  productName   String
  unit          String
  w38           String
  w39           String
  w40           String
  w41           String
  conversion    String?  // Can be null initially
  group         String?  // Category/group (WIF, Appetizers, etc.)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([productNumber])
  @@index([group])
}

// PDF metadata model
model PdfMetadata {
  id        Int      @id @default(autoincrement())
  pageCount Int
  title     String?
  fileName  String?  // Original PDF file name
  metadata  Json?    // Store metadata as JSON
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// P&L Report model
model PlReport {
  id                 String   @id @default(uuid())
  year               Int
  period              Int
  storeName           String
  company             String
  periodString        String   // e.g., "P01", "P12"
  translationCurrency String  @default("USD")
  fileName            String?  // Original file name
  lineItems           Json     // Array of PlLineItemData
  summaryData         Json     // Summary data object
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@unique([year, period])
  @@index([year])
  @@index([period])
}
